Perfect! Let‚Äôs build a centralized logger helper for your 
ASP.NET MVC Project Management system. 
his helper will let you log any action to your ActivityLog table w
ithout repeating code in every controller.

 
 
inside the setup create a file .cs
LogActionFilter.cs
-------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------
using Newtonsoft.Json;
using Project_Management.Models;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Project_Management.setup
{
    // ‚úÖ This filter automatically logs CRUD actions for all controllers
    public class LogActionFilter : ActionFilterAttribute
    {
        // ‚úÖ Runs BEFORE the controller action executes
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            try
            {
                // ‚úÖ Create a DbContext instance
                var db = new ProjectManagementEntities();

                // ‚úÖ Get the action name (Create, Edit, Delete, Details, etc.)
                string actionName = filterContext.ActionDescriptor.ActionName.ToLower();

                // ‚úÖ Only capture old entity values for Edit or Delete
                if (actionName == "edit" || actionName == "delete")
                {
                    // ‚úÖ Get the "id" parameter from action arguments
                    var idParam = filterContext.ActionParameters.ContainsKey("id") ? filterContext.ActionParameters["id"] : null;
                    if (idParam != null)
                    {
                        string id = idParam.ToString();

                        // ‚úÖ Determine controller name
                        string controllerName = filterContext.ActionDescriptor.ControllerDescriptor.ControllerName.ToLower();

                        // ‚úÖ Map controller name to entity type
                        Type entityType = null;
                        switch (controllerName)
                        {
                            case "useraccounts": entityType = typeof(useraccount); break;
                            case "superadmins": entityType = typeof(Superadmin); break;
                            case "StickyNotes": entityType = typeof(StickyNote); break;
                                // ‚ûï Add all your entity-controller mappings here
                        }

                        if (entityType != null)
                        {
                            // ‚úÖ Load the entity from database using Find(id)
                            var oldEntity = db.Set(entityType).Find(id);

                            // ‚úÖ Store serialized old entity in HttpContext for logging later
                            if (oldEntity != null)
                            {
                                filterContext.HttpContext.Items["OldEntity"] = JsonConvert.SerializeObject(oldEntity, Formatting.Indented);
                                filterContext.HttpContext.Items["TargetTable"] = controllerName;
                                filterContext.HttpContext.Items["TargetId"] = id;
                            }
                        }
                    }
                }
            }
            catch
            {
                // ‚ùå Ignore exceptions to not block user actions
            }

            base.OnActionExecuting(filterContext);
        }

        // ‚úÖ Runs AFTER the controller action executes
        public override void OnActionExecuted(ActionExecutedContext filterContext)
        {
            try
            {
                var db = new ProjectManagementEntities();

                // ‚úÖ Get controller & action names
                string controllerName = filterContext.ActionDescriptor.ControllerDescriptor.ControllerName;
                string actionName = filterContext.ActionDescriptor.ActionName;

                // ‚úÖ Skip logging for GET/view actions
                string httpMethod = filterContext.HttpContext.Request.HttpMethod.ToUpper();
                if (httpMethod == "GET") return;

                // ‚úÖ Who performed the action (from Session)
                string userId = (filterContext.HttpContext.Session["userid"] ?? "System").ToString();
                string userEmail = (filterContext.HttpContext.Session["email"] ?? "System").ToString();

                // ‚úÖ Prepare log variables
                string logType = "";
                string message = "";
                string oldData = filterContext.HttpContext.Items["OldEntity"] as string; // old value if any
                string newData = null;

                // ‚úÖ Capture NEW data for Create or Edit actions
                if (actionName.ToLower() == "create" || actionName.ToLower() == "edit")
                {
                    var formValues = new Dictionary<string, object>();

                    // ‚úÖ Loop through posted form keys
                    foreach (var key in filterContext.HttpContext.Request.Form.AllKeys)
                    {
                        // üö´ Skip anti-forgery token
                        if (key == "__RequestVerificationToken" || string.IsNullOrWhiteSpace(key))
                            continue;

                        // ‚úÖ Add form value to dictionary
                        formValues[key] = filterContext.HttpContext.Request.Form[key];
                    }

                    // ‚úÖ Serialize new form values
                    newData = JsonConvert.SerializeObject(formValues, Formatting.Indented);
                }

                // ‚úÖ Determine log type and message
                switch (actionName.ToLower())
                {
                    case "create":
                        logType = "CREATE";
                        message = $"A new record was created in {controllerName}.";
                        break;
                    case "edit":
                        logType = "UPDATE";
                        message = $"Record was updated in {controllerName}.";
                        break;
                    case "delete":
                        logType = "DELETE";
                        message = $"A record was deleted from {controllerName}.";
                        break;
                    default:
                        logType = "ACTION";
                        message = $"Action executed in {controllerName}.";
                        break;
                }

                // ‚úÖ Build detailed message including old & new values
                string detailedMessage = message;

                if (!string.IsNullOrEmpty(oldData))
                {
                    detailedMessage += $"\n\nüìù OLD VALUES:\n{oldData}";
                }

                if (!string.IsNullOrEmpty(newData))
                {
                    detailedMessage += $"\n\nüÜï NEW VALUES:\n{newData}";
                }

                // ‚úÖ Create new ActivityLog record
                var log = new ActivityLog
                {
                    id = Guid.NewGuid().ToString(),
                    title = logType + " action executed",
                    message = detailedMessage,
                    code = "200",
                    status = "OK",
                    notes = userId,
                    source = controllerName + "/" + actionName,
                    url = filterContext.HttpContext.Request.RawUrl,
                    logtype = logType,
                    insertdate = DateTime.Now,
                    insertuser = userEmail
                };

                // ‚úÖ Save log to database
                db.ActivityLogs.Add(log);
                db.SaveChanges();
            }
            catch
            {
                // ‚ùå Don't crash app if logging fails
            }

            base.OnActionExecuted(filterContext);
        }
    }
}

-------------------------------------------------------------------------------------------------
inside App_Start folder
in side FilterConfig.cs
-------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------
using System.Web;
using System.Web.Mvc; 
using Project_Management.Models;
using Project_Management.setup; 

namespace Project_Management
{
    public class FilterConfig
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
            // yusuf signature
            filters.Add(new LogActionFilter()); // Global logging applied
        }
    }
}



Would you like me to also make a simple Admin UI page to display and filter these logs (by user, date, or action type)? This will make it easy to view changes without going directly to the database.


üß™ Next Step (optional): I can build you a simple Activity Log UI ‚Äî with filters (by date, user, log type) so the Admin can view everything without checking the DB directly.