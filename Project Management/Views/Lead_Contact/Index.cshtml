@model IEnumerable<Project_Management.Models.Lead_Contact>
@{
    ViewBag.Title = "Packages";
    Layout = "~/Views/Shared/_Layout.cshtml";

    Project_Management.Models.project_managementEntities db =
        new Project_Management.Models.project_managementEntities();
    int sn = 0;
}

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Packages</h4>
                <br />
                <button class="btn btn-primary waves-effect waves-light"
                        data-toggle="modal" data-target="#create">
                    <i class="mdi mdi-plus-circle-outline"></i>
                    Add Lead Contact
                </button>
                <br /><br />


                <div class="card">
                    <div class="card-body">
                        <div class="table-rep-plugin">
                            <div class="table-responsive mb-0" data-pattern="priority-columns">
                                <table id="datatable-buttons"
                                       class="table table-striped table-bordered">
                                    <thead class="thead-light">
                                        <tr>
                                            <th>SN</th>
                                            <th>CONTACT NAME</th>
                                            <th>EMAIL</th>
                                            <th>LEAD OWNER</th>
                                            <th>ADDED BY</th>
                                            <th>CREATED</th>
                                            <th>ACTIONS</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in db.Lead_Contact.OrderBy(p => p.insertdate))
                                        {
                                            sn++;

                                            <tr>
                                                <td>@sn</td>
                                                <td>
                                                    @Html.DisplayFor(modelItem => item.name)
                                                </td>
                                                <td>
                                                    @Html.DisplayFor(modelItem => item.email)
                                                </td>
                                                <td>
                                                    @Html.DisplayFor(modelItem => item.Employee.name)
                                                </td>
                                                <td>
                                                    @Html.DisplayFor(modelItem => item.Employee1.name)
                                                </td>
                                                <td>
                                                    @Convert.ToDateTime(item.insertdate).ToShortDateString()
                                                </td>                                              
                                                <td>
                                                    <div class="dropdown d-inline-block">
                                                        <button type="button" class="btn header-item waves-effect text-dark" id="page-header-user-dropdown"
                                                                data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                            <i class="fa fa-ellipsis-v"></i> 
                                                            <i class="mdi mdi-chevron-down d-none d-xl-inline-block"></i>
                                                        </button>
                                                        <div class="dropdown-menu dropdown-menu-end">
                                                            <!-- item-->                                                            
                                                            <a class="dropdown-item" href="#edit_@item.id" data-toggle="modal">
                                                                <i class="bx bx-edit font-size-16 align-middle me-1"></i>
                                                                Edit
                                                            </a>
                                                            <a class="dropdown-item" href="@Url.Action("Details", "Lead_Contact", new { id = item.id })">
                                                                <i class="bx bxs-detail font-size-16 align-middle me-1"></i>
                                                                Details
                                                            </a>
                                                            <a class="dropdown-item"  href="#delete_@item.id" data-toggle="modal">
                                                                <i class="bx bx-trash font-size-16 align-middle me-1"></i>
                                                                Delete
                                                            </a>                                                          
                                                            <div class="dropdown-divider"></div>                                                            
                                                        </div>
                                                    </div>

                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- Create Modal -->
<div id="create" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header"><h6>Create Lead_Contact</h6></div>
            @using (Html.BeginForm("Create", "Lead_Contact", FormMethod.Post, new { @class = "custom-validation" }))
            {
                @Html.AntiForgeryToken()
        <div class="modal-body">
            <div class="row">
                <div class="col-md-4">
                    <label>Name</label>
                    <input type="text" name="name" class="form-control" required />
                </div>
                <div class="col-md-4">
                    <label>Email</label>
                    <input type="text" name="email" class="form-control" required />
                </div>
                <div class="col-md-4">
                    <label>
                        Lead Source
                    </label>
                    <input type="text" name="leadsource" class="form-control" required />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-4">
                    <label>Added By</label>
                    <select class="form-control" name="addedby" required="">
                        <option> Select Employee</option>
                        @foreach (var item in db.Employees.ToList())
                        {
                            <option value="@item.id">@item.name</option>
                        }
                    </select>
                </div>
                <div class="col-md-4">
                    <label>Lead Owner</label>
                    <select class="form-control" name="leadowner" required="">
                        <option> Select Employee</option>
                        @foreach (var item in db.Employees.ToList())
                        {
                            <option value="@item.id">@item.name</option>
                        }
                    </select>
                </div>
                <div class="col-md-4">
                    <label>Deal Name</label>
                    <input type="text" name="dealname" class="form-control" required />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-4">
                    <label>PipeLine</label>
                    <input type="text" name="pipeline" class="form-control" required />
                </div>
                <div class="col-md-4">
                    <label>
                        Deal Stages
                    </label>
                    <select name="dealstages" class="form-control" required>
                        <option disabled selected>Please Select</option>
                        <option>Generated</option>
                        <option>Qualified</option>
                        <option>Initial Contact</option>
                        <option>Schedule Appointment</option>
                        <option>Proposal Sent</option>
                        <option>Win</option>
                        <option>Lost</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label>Deal Value</label>
                    <input type="text" name="dealvalue" class="form-control" required />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-4">
                    <label>Close Date</label>
                    <input type="date" name="closedate" class="form-control" required />
                </div>
                <div class="col-md-4">
                    <label>Deal Category</label>
                    <select name="dealcategory" class="form-control" required>
                        <option disabled selected>Please Select</option>
                        <option>Best Case</option>
                        <option>Closed</option>
                        <option>Commit</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label>Deal Agent</label>
                    <input type="text" name="dealagent" class="form-control" required />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-6">
                    <label>Products</label>
                    <input type="text" name="product" class="form-control" required />
                </div>
                <div class="col-md-6">
                    <label>Deal Watcher</label>
                    <select class="form-control" name="dealwatcher" required="">
                        <option> Select Employee</option>
                        @foreach (var item in db.Employees.ToList())
                        {
                            <option value="@item.id">@item.name</option>
                        }
                    </select>
                </div>
            </div>

            <br />
            <div class="row">
                <div class="col-md-3">
                    <label>Company Name</label>
                    <input type="text" name="companyName" class="form-control" required />
                </div>
                <div class="col-md-3">
                    <label>Website</label>
                    <input type="text" name="website" class="form-control" required />
                </div>
                <div class="col-md-3">
                    <label>Mobile</label>
                    <input type="text" name="mobile" class="form-control" required />
                </div>
                <div class="col-md-3">
                    <label>Office phone munber</label>
                    <input type="text" name="officemobile" class="form-control" required />
                </div>
            </div>
            <br />
             <div class="row">
                <div class="col-md-3">
                    <label>Country</label>
                    <input type="text" name="country" class="form-control" required />
                </div>
                <div class="col-md-3">
                    <label>State</label>
                    <input type="text" name="state" class="form-control" required />
                </div>
                <div class="col-md-3">
                    <label>City</label>
                    <input type="text" name="city" class="form-control" required />
                </div>
                <div class="col-md-3">
                    <label>Postal Code</label>
                    <input type="text" name="postalcode" class="form-control" required />
                </div>
            </div>
            <br />

            <div class="row">
                <div class="col-md-12">
                    <label>Address</label>
                    <textarea name="address" class="form-control" rows="5"></textarea>
                </div>
            </div>
        </div>
                <br />
                <div class="row">
                    <div class="col-md-12 text-center">
                        <button type="submit" class="btn btn-success">Create</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
                <br /> <br />
            }
        </div>
    </div>
</div>
